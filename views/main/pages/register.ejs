<!DOCTYPE html>
<html lang="ko">
  <% include ../partials/head %>
  <link rel="stylesheet" href="/css/login.css" />
  <body>
    <div class="wrap-all">
      <% include ../partials/header %>
      <!-- login contents start -->
      <section class="section section-1">
        <div class="login-form">
          <form method="post" name="login-form">
            <div class="item-input">
              <label for="email">이메일</label>
              <input
                type="email"
                name="email"
                id="email"
                placeholder="이메일을 입력하세요"
                autofocus
              />
            </div>
            <div class="item-input">
              <label for="name">이름</label>
              <input
                type="text"
                name="name"
                id="name"
                placeholder="아이디를 입력하세요"
                autofocus
              />
            </div>
            <div class="item-input">
              <label for="password">비밀번호</label>
              <input
                type="password"
                name="password"
                id="password"
                placeholder="비밀번호를 입력하세요"
                autofocus
              />
            </div>
            <input type="submit" value="회원가입" class="login-btn" />
          </form>
          <div class="help">
            <a href="/pages/login">로그인</a>
          </div>
        </div>
      </section>

      <!-- login contents end -->
      <% include ../partials/footer %>
    </div>
    <script src="../js/basic.js"></script>
    <script type="text/javascript">
      $(document).ready(() => {
        $("form[name=login-form]").on("submit", (e) => {
          e.preventDefault();
          const arr = $("form[name=login-form]").serializeArray();
          const data = make(arr);
          console.log(data);
          $.ajax({
            url: "/api/users/register",
            method: "POST",
            data,
          })
            .done(() => {
              alert("성공적으로 가입되었습니다.");
            })
            .fail(() => {
              alert("회원가입에 실패했습니다");
            })
            .always((res) => {
              console.log(res); // TODO - delete
            });
        });
      });
    </script>
  </body>
</html>
